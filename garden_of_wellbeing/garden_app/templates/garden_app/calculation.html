{% extends "base.html" %}

{% block title %} Kalkulace {% endblock %}

{% block content %}
    <h2 style="text-align: center">Kalkulace</h2>
    <div class="calculation-table-container">
        <div class="calculation-table">
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>TRŽBY</th>
                        <th>NÁKLADY</th>
                        <th>MARŽE</th>
                        <th>Produktové náklady</th>
                        <th>Benzin/Nafta</th>
                        <th>Práce</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        {% for delivery_cost in delivery_costs %}
                        <td><strong>{{ delivery_cost.region }}</strong></td>
                        <td>{{ delivery_cost.total_sales }}</td>
                        <td>{{ delivery_cost.total_delivery_costs }}</td>
                        <td>{{ delivery_cost.margin }}</td>
                        <td>{{ delivery_cost.total_products_costs }}</td>
                        <td>{{ delivery_cost.fuel_cost }}</td>
                        <td>{{ delivery_cost.salary_cost }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="calculation-form">
            <table>
                <thead>
                    <tr>
                        <th>Parametr</th>
                        <th>Hodnota</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <form method="post" action="{% url 'calculation' %}">
                        {% csrf_token %}
                        <tr>
                            <td>Cena benzinu</td>
                            <td><input type="number" name="fuel_price"></td>
                            <td><button type="submit">Potvrdit</button></td>
                        </tr>
                        {% if errors.fuel_price %}
                        <tr>
                            <td colspan="3" class="error">{{ errors.fuel_price }}</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <td>Hodinová mzda</td>
                            <td><input type="number" name="salary"></td>
                            <td><button type="submit">Potvrdit</button></td>
                        </tr>
                        {% if errors.salary %}
                        <tr>
                            <td colspan="3" class="error">{{ errors.salary }}</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <td>Cena za KW</td>
                            <td><input type="number" name="kw_price"></td>
                            <td><button type="submit">Potvrdit</button></td>
                        </tr>
                        {% if errors.kw_price %}
                        <tr>
                            <td colspan="3" class="error">{{ errors.kw_price }}</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <td>Počet wattů</td>
                            <td><input type="number" name="watts"></td>
                            <td><button type="submit">Potvrdit</button></td>
                        </tr>
                        {% if errors.watts %}
                        <tr>
                            <td colspan="3" class="error">{{ errors.watts }}</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <td>Počet hodin světla</td>
                            <td><input type="number" name="lighting_hours"></td>
                            <td><button type="submit">Potvrdit</button></td>
                        </tr>
                        {% if errors.lighting_hours %}
                        <tr>
                            <td colspan="3" class="error">{{ errors.lighting_hours }}</td>
                        </tr>
                        {% endif %}
                    </form>
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

















